<!DOCTYPE html >
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<title>Đăng Nhập</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->
<link rel="icon" type="image/png" href="./images/icons/favicon.ico" />
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="./vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="./fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="./fonts/iconic/css/material-design-iconic-font.min.css">
<!--===============================================================================================-->

<link rel="stylesheet" type="text/css" href="./css/logins/util.css">
<link rel="stylesheet" type="text/css" href="./css/logins/login.css">

<script
	src="https://cdn.jsdelivr.net/npm/sweetalert2@10.15.0/dist/sweetalert2.js"></script>
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/sweetalert2@10.15.0/dist/sweetalert2.css">
</head>
<script>
	function sweetalert2(loginProvider){
    	Swal.fire({
    	icon: 'warning',
    	title: 'BestCV',
    	text: "Bạn muốn đăng nhập hay đăng ký?",
		showDenyButton: true,
  		showCancelButton: true,
  		confirmButtonText: `Đăng nhập`,
  		denyButtonText: `Đăng ký`
	}).then((result) => {
  	if (result.isConfirmed) {
  		if(loginProvider == "facebook"){
  	  		window.location.href="https://www.facebook.com/dialog/oauth?client_id=1148557675566963&redirect_uri=https://localhost:8080/login-facebook";  			
  		}
  		else if(loginProvider == "zalo"){
  			window.location.href="#";
  		}
  		else if(loginProvider == "google"){
  	  		window.location.href= "https://accounts.google.com/o/oauth2/auth?scope=email&redirect_uri=https://localhost:8080/login-google&response_type=code&client_id=816194019760-cim3m4she3169ig72l4qog91cnrr8q3b.apps.googleusercontent.com&approval_prompt=force"
  		}
  	} else if (result.isDenied) {
		Swal.fire({
			icon: 'warning',
			title: 'BestCV',
			text: "Bạn muốn đăng nhập hay đăng ký?",
			showDenyButton: true,
			showCancelButton: true,
			confirmButtonText: `Ứng Tuyển Viên`,
			denyButtonText: `Nhà Tuyển Dụng`
		}).then((result) => {
			if (result.isConfirmed) {
				if(loginProvider == "facebook"){
					window.location.href="https://www.facebook.com/dialog/oauth?client_id=729789317638672&redirect_uri=https://localhost:8080/login-facebook-utv";
				}
				else if(loginProvider == "zalo"){
					window.location.href="#";
				}
				else if(loginProvider == "google"){
					window.location.href= "https://accounts.google.com/o/oauth2/auth?scope=email&redirect_uri=https://localhost:8080/login-google-utv&response_type=code\n" +
							"    &client_id=359135169660-nai2c2k4qlcpd63h9iggepddqbhpuuvf.apps.googleusercontent.com&approval_prompt=force"
				}
			} else if (result.isDenied) {
				if(loginProvider == "facebook"){
					window.location.href="https://www.facebook.com/dialog/oauth?client_id=729789317638672&redirect_uri=https://localhost:8080/login-facebook-ntd";
				}
				else if(loginProvider == "zalo"){
					window.location.href="#";
				}
				else if(loginProvider == "google"){
					window.location.href= "https://accounts.google.com/o/oauth2/auth?scope=email&redirect_uri=https://localhost:8080/login-google-ntd&response_type=code\n" +
							"    &client_id=359135169660-nai2c2k4qlcpd63h9iggepddqbhpuuvf.apps.googleusercontent.com&approval_prompt=force"
				}
			}
		})}
	})}
	function sweetalert3(){
		  Swal.fire({
		   icon: 'warning',
		   title: 'BestCV',
		   text: "Bạn muốn đăng nhập hay đăng ký?",
		   showDenyButton: true,
		   showCancelButton: true,
		   confirmButtonText: `Ứng Tuyển Viên`,
		   denyButtonText: `Nhà Tuyển Dụng`
		  }).then((result) => {
		   if (result.isConfirmed) {
			   window.location.href = "/registerUTV";
		   }else if (result.isDenied) {
			   window.location.href = "/registerNTD";
		   }
		  })
		 }
	function KiemTraForm(){
		 	var regPass =/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/;
	        var regEmail = /^[a-z][a-z0-9_\.]{2,32}@[a-zA-Z0-9]{4,}(\.[a-zA-Z0-9]{2,4}){1,2}$/;
	        var regLeight =/[a-zA-Z0-9]{6,}/;
	        var valiName = true;
	        var valiPass = true;
	        if($('#email').val().trim()==''){
	            $('#div-UserName').text('Username không được để trống');
	            valiName  = false;
	        }
	        else if(!regEmail.exec($('#email').val())){
	            $('#div-UserName').text('Username không hợp lệ');
	            valiName  = false;
	        }
	        else{
	            $('#div-UserName').text('');
	            valiName  = true;
	        }
	        if ($('#passwordHash').val().trim()==''){
	            $('#div-Password').text('Password không được để trống');
	            valiPass = false;
	        }
	        else if(!regLeightexec($('#passwordHash').val().trim())){
	        	$('#div-Password').text('Password không đúng định dạng');
	 	    	valiPass = false;
	        }
	        //else if(!regPass.exec($('#passwordHash').val())){
	        //    $('#div-Password').text('Password không đúng định dạng');
	        //    valiPass = false;
	        //}
	        else{
	            $('#div-Password').text('');
	            valiPass = true;
	        }
	        if(valiPass==true && valiName==true){
	            return true;
	        }else{
	            return false;
	        }
	}
</script>
<body>

	<div class="limiter">
		<div class="container-login100"
			style="background-image: url('./images/bg-01.jpg');">
			<div class="wrap-login100 p-l-55 p-r-55 p-t-65 p-b-54">
				<form class="login100-form validate-form"
					th:action="@{/j_spring_security_login}" method="post">
					<span class="login100-form-title p-b-49"> Đăng Nhập </span>
					<div class="wrap-input100" th:if="${param.error}">
						<p class="text-danger"
							th:if="${#session!= null and #session.getAttribute('SPRING_SECURITY_LAST_EXCEPTION') != null}">
							[[${session.SPRING_SECURITY_LAST_EXCEPTION.message}]]</p>
					</div>
					<div class="wrap-input100 validate-input m-b-23"
						data-validate="Yêu cầu nhập tài khoản">
						<span id="div-UserName" class="text-danger"
							style="font-size: 14px;"></span> <br /> <span
							class="label-input100">Tài khoản</span> <input class="input100"
							type="text" name="email" id="email" placeholder="Nhập tài khoản">
						<span class="focus-input100" data-symbol="&#xf206;"></span>
					</div>

					<div class="wrap-input100 validate-input"
						data-validate="Yêu cầu nhập mật khẩu">
						<span id="div-Password" class="text-danger"
							style="font-size: 14px;"></span> <br /> <span
							class="label-input100">Mật khẩu</span> <input class="input100"
							type="password" name="passwordHash" id="passwordHash"
							placeholder="Nhập mật khẩu"> <span class="focus-input100"
							data-symbol="&#xf190;"></span>
					</div>

					<input hidden=true type="checkbox" checked="checked"
						name="remember-me" />

					<div class="text-right p-t-8 p-b-31">
						<a href="/forgot_password"> Quên mật khẩu? </a>
					</div>

					<div class="container-login100-form-btn">
						<div class="wrap-login100-form-btn">
							<div class="login100-form-bgbtn"></div>
							<button class="login100-form-btn" type="submit"
								onclick="return KiemTraForm()">Đăng Nhập</button>
						</div>
					</div>
					<div class="container-login100-form-btn">
						<div class="wrap-login100-form-btn">
							<div class="login100-form-bgbtn"></div>
							<button class="login100-form-btn" onclick="sweetalert3()">
								Đăng Ký</button>

						</div>
					</div>

					<div class="flex-col-c p-t-30">
						<span class="txt1 p-b-17">Đăng nhập với </span>
					</div>
					<div class="flex-c-m">
						<a onclick="sweetalert2('facebook')"
							class="login100-social-item bg1"> <i class="fa fa-facebook"></i>
						</a> <a onclick="sweetalert2('zalo')" class="login100-social-item bg2">
							<img src="./images/zalo.png" width="30px" height="30px"
							alt="zalo">
						</a> <a onclick="sweetalert2('google')"
							class="login100-social-item bg3"> <i class="fa fa-google"></i>
						</a>
					</div>

					<div class="flex-col-c p-t-150">
						<span class="txt1 p-b-17"> Hoặc đăng ký để dùng </span> <a
							href="#" class="txt2" onclick="sweetalert3()"> ĐĂNG KÝ </a>
					</div>
				</form>
			</div>
		</div>
	</div>

	<!--===============================================================================================-->
	<script src="./vendor/jquery/jquery-3.2.1.min.js"></script>
	<!--===============================================================================================-->



</body>
</html>